scene.onOverlapTile(SpriteKind.Player, myTiles.tile2, function (sprite, location) {
    sprite.startEffect(effects.fire, 3000)
    tiles.setTileAt(location, myTiles.transparency16)
    Powerup2()
})
info.onCountdownEnd(function () {
    Powerup = 0
})
function Powerup2 () {
    Powerup = 1
    info.startCountdown(3)
}
scene.onOverlapTile(SpriteKind.Player, myTiles.tile1, function (sprite, location) {
    tiles.setTileAt(location, myTiles.transparency16)
    info.changeScoreBy(1)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (Powerup == 1) {
        otherSprite.destroy(effects.fire, 500)
        No_Ghosts += -1
    } else {
        game.over(false)
    }
})
let New_Ghost: Sprite = null
let Powerup = 0
let No_Ghosts = 4
tiles.setTilemap(tiles.createTilemap(hex`0a000f0007080808080808080806010a0a0a0a0a0a0a0a05010a090a090a09090a05010c090a090a0a090c05010a090a09090a0a0a05010a0a0a0a0a0a090a05010a09090a090a090a05010a0a090a09090a0a0501090a090a0b090a090501090a0a0a0a0a0a0905010a0a0a0909090a0905010c090a0a0a090a0c05010a0909090a09090a05010a0a0a0a0a0a0a0a0502030303030303030304`, img`
    2 2 2 2 2 2 2 2 2 2 
    2 . . . . . . . . 2 
    2 . 2 . 2 . 2 2 . 2 
    2 . 2 . 2 . . 2 . 2 
    2 . 2 . 2 2 . . . 2 
    2 . . . . . . 2 . 2 
    2 . 2 2 . 2 . 2 . 2 
    2 . . 2 . 2 2 . . 2 
    2 2 . 2 . . 2 . 2 2 
    2 2 . . . . . . 2 2 
    2 . . . 2 2 2 . 2 2 
    2 . 2 . . . 2 . . 2 
    2 . 2 2 2 . 2 2 . 2 
    2 . . . . . . . . 2 
    . 2 2 2 2 2 2 2 2 2 
    `, [myTiles.transparency16,sprites.dungeon.darkGroundWest,sprites.dungeon.darkGroundSouthWest0,sprites.dungeon.darkGroundSouth,sprites.dungeon.darkGroundSouthEast0,sprites.dungeon.darkGroundEast,sprites.dungeon.darkGroundNorthEast0,sprites.dungeon.darkGroundNorthWest0,sprites.dungeon.darkGroundNorth,sprites.dungeon.floorLight0,myTiles.tile1,sprites.dungeon.collectibleRedCrystal,myTiles.tile2], TileScale.Sixteen))
let Duck = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . b b b b b b . . . . 
    . . . . . b b 5 5 5 5 5 b . . . 
    . . . . b b 5 d 1 f 5 5 d f . . 
    . . . . b 5 5 1 f f 5 d 4 c . . 
    . . . . b 5 5 d f b d d 4 4 . . 
    . b b b d 5 5 5 5 5 4 4 4 4 4 . 
    . d d d b b d 5 5 4 4 4 4 4 b . 
    . b d 5 5 5 b 5 5 5 5 5 5 b . . 
    . d c 5 5 5 5 d 5 5 5 5 5 5 b . 
    . b d c d 5 5 b 5 5 5 5 5 5 b . 
    . c d d c c b d 5 5 5 5 5 d b . 
    . . c b d d d d d 5 5 5 b b . . 
    . . . c c c c c c c c b b . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(Duck, sprites.dungeon.collectibleRedCrystal)
scene.cameraFollowSprite(Duck)
controller.moveSprite(Duck, 80, 80)
let Ghost = sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ..........ffff..........
    ........ff1111ff........
    .......fb111111bf.......
    .......f11111111f.......
    ......fd11111111df......
    ......fd11111111df......
    ......fddd1111dddf......
    ......fbdbfddfbdbf......
    ......fcdcf11fcdcf......
    .......fb111111bf.......
    ......fffcdb1bdffff.....
    ....fc111cbfbfc111cf....
    ....f1b1b1ffff1b1b1f....
    ....fbfbffffffbfbfbf....
    .........ffffff.........
    ...........fff..........
    ........................
    ........................
    ........................
    ........................
    `, SpriteKind.Enemy)
let G2 = sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ..........ffff..........
    ........ff1111ff........
    .......fb111111bf.......
    .......f11111111f.......
    ......fd11111111df......
    ......fd11111111df......
    ......fddd1111dddf......
    ......fbdbfddfbdbf......
    ......fcdcf11fcdcf......
    .......fb111111bf.......
    ......fffcdb1bdffff.....
    ....fc111cbfbfc111cf....
    ....f1b1b1ffff1b1b1f....
    ....fbfbffffffbfbfbf....
    .........ffffff.........
    ...........fff..........
    ........................
    ........................
    ........................
    ........................
    `, SpriteKind.Enemy)
let G3 = sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ..........ffff..........
    ........ff1111ff........
    .......fb111111bf.......
    .......f11111111f.......
    ......fd11111111df......
    ......fd11111111df......
    ......fddd1111dddf......
    ......fbdbfddfbdbf......
    ......fcdcf11fcdcf......
    .......fb111111bf.......
    ......fffcdb1bdffff.....
    ....fc111cbfbfc111cf....
    ....f1b1b1ffff1b1b1f....
    ....fbfbffffffbfbfbf....
    .........ffffff.........
    ...........fff..........
    ........................
    ........................
    ........................
    ........................
    `, SpriteKind.Enemy)
let G4 = sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ..........ffff..........
    ........ff1111ff........
    .......fb111111bf.......
    .......f11111111f.......
    ......fd11111111df......
    ......fd11111111df......
    ......fddd1111dddf......
    ......fbdbfddfbdbf......
    ......fcdcf11fcdcf......
    .......fb111111bf.......
    ......fffcdb1bdffff.....
    ....fc111cbfbfc111cf....
    ....f1b1b1ffff1b1b1f....
    ....fbfbffffffbfbfbf....
    .........ffffff.........
    ...........fff..........
    ........................
    ........................
    ........................
    ........................
    `, SpriteKind.Enemy)
tiles.placeOnTile(Ghost, tiles.getTileLocation(1, 3))
tiles.placeOnTile(G2, tiles.getTileLocation(8, 3))
tiles.placeOnTile(G3, tiles.getTileLocation(1, 11))
tiles.placeOnTile(G4, tiles.getTileLocation(8, 11))
Ghost.follow(Duck, 30)
G2.follow(Duck, 40)
G3.follow(Duck, 50)
G4.follow(Duck, 60)
game.onUpdateInterval(1000, function () {
    if (No_Ghosts < 4) {
        New_Ghost = sprites.create(img`
            ........................
            ........................
            ........................
            ........................
            ..........ffff..........
            ........ff1111ff........
            .......fb111111bf.......
            .......f11111111f.......
            ......fd11111111df......
            ......fd11111111df......
            ......fddd1111dddf......
            ......fbdbfddfbdbf......
            ......fcdcf11fcdcf......
            .......fb111111bf.......
            ......fffcdb1bdffff.....
            ....fc111cbfbfc111cf....
            ....f1b1b1ffff1b1b1f....
            ....fbfbffffffbfbfbf....
            .........ffffff.........
            ...........fff..........
            ........................
            ........................
            ........................
            ........................
            `, SpriteKind.Enemy)
        New_Ghost.follow(Duck, 30)
        tiles.placeOnRandomTile(New_Ghost, sprites.dungeon.collectibleRedCrystal)
        No_Ghosts += 1
    }
})
